<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      for (let color of ["red", "green", "blue"]) {
        const div = document.createElement("div");

        const shadowDom = div.attachShadow({ mode: "open" });

        document.body.appendChild(div)
        shadowDom.innerHTML = `
          <p>Make me ${color}</p>

          <style>
            p {
              color: ${color};
            }

          </style>
        `
      }
    </script>
  </body>
</html>
